parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"IfYP":[function(require,module,exports) {
var s=1e3,e=60*s,r=60*e,a=24*r,n=7*a,c=365.25*a;function t(t){if(!((t=String(t)).length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(u){var i=parseFloat(u[1]);switch((u[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*c;case"weeks":case"week":case"w":return i*n;case"days":case"day":case"d":return i*a;case"hours":case"hour":case"hrs":case"hr":case"h":return i*r;case"minutes":case"minute":case"mins":case"min":case"m":return i*e;case"seconds":case"second":case"secs":case"sec":case"s":return i*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function u(n){var c=Math.abs(n);return c>=a?Math.round(n/a)+"d":c>=r?Math.round(n/r)+"h":c>=e?Math.round(n/e)+"m":c>=s?Math.round(n/s)+"s":n+"ms"}function i(n){var c=Math.abs(n);return c>=a?o(n,c,a,"day"):c>=r?o(n,c,r,"hour"):c>=e?o(n,c,e,"minute"):c>=s?o(n,c,s,"second"):n+" ms"}function o(s,e,r,a){var n=e>=1.5*r;return Math.round(s/r)+" "+a+(n?"s":"")}module.exports=function(s,e){e=e||{};var r=typeof s;if("string"===r&&s.length>0)return t(s);if("number"===r&&isFinite(s))return e.long?i(s):u(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};
},{}],"MTTc":[function(require,module,exports) {
function e(e){function n(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]}function t(e){let o;function i(...e){if(!i.enabled)return;const n=i,s=Number(new Date),r=s-(o||s);n.diff=r,n.prev=o,n.curr=s,o=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(s,r)=>{if("%%"===s)return s;a++;const o=t.formatters[r];if("function"==typeof o){const t=e[a];s=o.call(n,t),e.splice(a,1),a--}return s}),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=n(e),i.destroy=s,i.extend=r,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function s(){const e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}function r(e,n){const s=t(this.namespace+(void 0===n?":":n)+e);return s.log=this.log,s}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.names=[],t.skips=[];const s=("string"==typeof e?e:"").split(/[\s,]+/),r=s.length;for(n=0;n<r;n++)s[n]&&("-"===(e=s[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){const e=t.instances[n];e.enabled=t.enabled(e.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,s;for(n=0,s=t.skips.length;n<s;n++)if(t.skips[n].test(e))return!1;for(n=0,s=t.names.length;n<s;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=require("ms"),Object.keys(e).forEach(n=>{t[n]=e[n]}),t.instances=[],t.names=[],t.skips=[],t.formatters={},t.selectColor=n,t.enable(t.load()),t}module.exports=e;
},{"ms":"IfYP"}],"g5IB":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"jD9Y":[function(require,module,exports) {
var process = require("process");
var e=require("process");function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function C(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+module.exports.humanize(this.diff),!this.useColors)return;const o="color: "+this.color;e.splice(1,0,o,"color: inherit");let C=0,t=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(C++,"%c"===e&&(t=C))}),e.splice(t,0,o)}function t(...e){return"object"==typeof console&&console.log&&console.log(...e)}function r(e){try{e?exports.storage.setItem("debug",e):exports.storage.removeItem("debug")}catch(o){}}function n(){let o;try{o=exports.storage.getItem("debug")}catch(C){}return!o&&void 0!==e&&"env"in e&&(o=void 0),o}function s(){try{return localStorage}catch(e){}}exports.log=t,exports.formatArgs=C,exports.save=r,exports.load=n,exports.useColors=o,exports.storage=s(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],module.exports=require("./common")(exports);const{formatters:F}=module.exports;F.j=function(e){try{return JSON.stringify(e)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}};
},{"./common":"MTTc","process":"g5IB"}],"bEsR":[function(require,module,exports) {
"use strict";const t=require("debug")("GdfsEvent");function e(t,e){this._target=t,this._eventName=e}e.prototype.listen=function(e){t(`GdfsEvent.listen: ${this._eventName}=>${e.constructor.name}`),"AsyncFunction"===e.constructor.name?this._target.addEventListener(this._eventName,async t=>await e(t)):this._target.addEventListener(this._eventName,e)},e.prototype.fire=function(e={}){const n=new Event(this._eventName);for(const t of Object.keys(e))n[t]=e[t];t(`GdfsEvent.fire: ${this._eventName}`,`extraData: ${JSON.stringify(e)}`),this._target.dispatchEvent(n)},module.exports=e;
},{"debug":"jD9Y"}],"B8ln":[function(require,module,exports) {
"use strict";const t=require("debug")("GdfsPath");function e(t){this._lastSlash=!0,this._absolute=!0,this._paths=[],null!=t&&this.parse(t)}t("loading"),e.prototype.getPathPart=function(){if(this._lastSlash)return new e(this.toString());const s=this.elements();return s.splice(-1,1,""),t(`getPathPart: paths: ${JSON.stringify(s)}`),new e(s.join("/"))},e.prototype.getFilename=function(){return this.elements().pop()},e.prototype.elements=function(){const t=this._paths.map(t=>t);return this._absolute&&t.unshift(""),this._lastSlash&&t.push(""),t},e.merge=((...s)=>(t(`Gdfs.merge: ${s.map(t=>t.toString()).join(" | ")}`),s.reduce((s,n,r)=>{t(`Gdfs.merge: Reducing #${r}`),t(`Gdfs.merge: pathA: ${s.toString()}`),t(`Gdfs.merge: pathB: ${n.toString()}`),"string"==typeof s&&(s=new e(s)),"string"==typeof n&&(n=new e(n));const i=s.toString(),o=n.toString();if(n.isAbsolute())return t(`returns ${o}`),new e(o);const h=new e([i,o].join("/"));return t(`Gdfs.merge: returns ${h.toString()}`),h})));const s=t=>{const e=[];let s=!1,n=0,r="",i=t.split("");for(;n<i.length;){const t=i[n];s?(r+=t,s=!1):"\\"===t?s=!0:"/"===t?(e.push(r),r=""):r+=t,n++}if(e.push(r),s)throw new Error(`Invalid pathname ${t}`);if(0==e.length)throw new Error("Invalid pathname. It should not be empty.");return e};e.prototype.parse=function(e){let n=s(e.replace(/\/+/g,"/"));t(`parse ${JSON.stringify(e)} => ${JSON.stringify(n)}`);const r=""===n[n.length-1],i=""===n[0];for(r&&n.pop(),i&&n.shift(),this._lastSlash=!!r,this._absolute=!!i;;){let e=!1;if(n.length>=2&&(n=n.reduce((t,s)=>{Array.isArray(t)||(t=[t]);const n=t[t.length-1];return".."!==n&&".."===s?(t.pop(),e=!0):"."!==n&&"."===s?e=!0:t.push(s),t})),!e){this._paths=n,t(`this._paths:${JSON.stringify(this._paths)}`);break}}},e.prototype.isAbsolute=function(){return this._absolute},e.prototype.isDirSpec=function(){return this._lastSlash},e.prototype.toString=function(){if(0===this._paths.length)return"/";const t=this._absolute?"/":"",e=this._lastSlash?"/":"";return`${t}${this._paths.join("/")}${e}`},module.exports=e;
},{"debug":"jD9Y"}],"YTm0":[function(require,module,exports) {
"use strict";const e=require("debug")("gdfs");e("loading");const t=require("./gdfs-event.js"),i=require("./gdfs-path.js");function n(){this._oncwdupdate=null,this._currentPath=[{id:"root",name:""}]}n.createClient=(()=>new n),n.signInStatusChangeEvent=new t(window,"gdfs-signin-status-change"),n.loadApi=((t,i)=>{e("Start of Gdfs.loadApi");const r=document.createElement("SCRIPT");r.setAttribute("async","async"),r.setAttribute("src","https://apis.google.com/js/api.js");const a=new Promise((a,s)=>{r.addEventListener("load",()=>{r.onload=(()=>{}),gapi.load("client:auth2",async()=>{e("initialize gapi.client"),"object"==typeof t&&null==i&&"clientId"in t&&"clientSecret"in t&&"discoveryDocs"in t&&"scope"in t?await gapi.client.init(t):await gapi.client.init({clientId:t,clientSecret:i,discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scope:["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata","https://www.googleapis.com/auth/drive.metadata.readonly","https://www.googleapis.com/auth/drive.photos.readonly","https://www.googleapis.com/auth/drive.readonly"].join(" ")}),gapi.auth2.getAuthInstance().isSignedIn.listen(()=>{e("the signed-in-status changed"),n.signInStatusChangeEvent.fire()}),n.signInStatusChangeEvent.fire(),e(`Gdfs.loadApi SignedIn: ${n.isSignedIn()}`),e("Gdfs.loadApi is resolved"),a()})}),r.addEventListener("readystatechange",()=>{e(`readystatechange ${r.readyState}`),"complete"===r.readyState&&r.onload()}),r.onerror=(t=>{e("Gdfs.loadApi is rejected"),s(new URIError(`The script ${t.target.src} is not accessible.`))}),document.body.appendChild(r)});return e("End of Gdfs.loadApi"),a}),n.mimeTypeFolder="application/vnd.google-apps.folder",n.isSignedIn=(()=>gapi.auth2.getAuthInstance().isSignedIn.get()),n.signIn=(async()=>await gapi.auth2.getAuthInstance().signIn()),n.signOut=(async()=>await gapi.auth2.getAuthInstance().signOut()),n.getFileList=(async e=>{return(await gapi.client.drive.files.list(e)).result}),n.findFolderByName=(async(t,i)=>{e("No tests pass: Gdfs.findFolderByName");const r=[],a={pageSize:10,pageToken:null,q:[`parents in '${t}'`,`name = '${i}'`,`mimeType = '${n.mimeTypeFolder}'`,"trashed = false"].join(" and "),fields:"nextPageToken, files(id, name, mimeType, webContentLink, webViewLink)"};e(`${JSON.stringify(a)}`);try{do{const t=await n.getFileList(a);e(`${JSON.stringify(t)}`);for(const e of t.files)r.push(e);a.pageToken=t.nextPageToken}while(null!=a.pageToken)}catch(s){e(s.stack)}return r}),n.findFileByName=(async(t,i)=>{e("No tests pass: Gdfs.findFileByName");const r=[],a={pageSize:10,pageToken:null,q:[`parents in '${t}'`,`name = '${i}'`,"trashed = false"].join(" and "),fields:"nextPageToken, files(id, name, mimeType, webContentLink, webViewLink)"};e(`findFileByName: params: ${JSON.stringify(a,null,"  ")}`);do{const t=await n.getFileList(a);for(const i of t.files)e(`findFileByName: found file: ${JSON.stringify(i)}`),r.push(i);e(`findFileByName: result.nextPageToken: ${t.nextPageToken}`),a.pageToken=t.nextPageToken}while(null!=a.pageToken);return r}),n.getFileResource=(async e=>{return(await gapi.client.drive.files.get(e)).result}),n.isFolder=(e=>e.mimeType===n.mimeTypeFolder),n.downloadFile=((e,t)=>r("GET","https://www.googleapis.com/drive/v3/files/"+e,{alt:"media",acknowledgeAbuse:t})),n.createFile=(async(e,t,i)=>{const n=await r("POST","https://www.googleapis.com/drive/v3/files",{},{"Content-Type":"application/json"},JSON.stringify({name:t,mimeType:i,parents:[e]}));return JSON.parse(n)}),n.updateFile=(async(e,t,i)=>{const n=await r("PATCH","https://www.googleapis.com/upload/drive/v3/files/"+e,{uploadType:"media"},{"Content-Type":t},i);return JSON.parse(n)});const r=(e,t,i,n,r)=>{let o=new XMLHttpRequest;return o.open(e,s(t,i),!0),n=n||{},Object.keys(n).forEach(e=>{o.setRequestHeader(e,n[e])}),o.setRequestHeader("Authorization","Bearer "+a()),o.timeout=3e4,new Promise((e,t)=>{o.onload=(()=>{e(o.responseText)}),o.onerror=(()=>{t(new Error(o.statusText))}),o.ontimeout=(()=>{t(new Error("request timeout"))}),o.send(r)})},a=()=>{return gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse(!0).access_token},s=(e,t)=>{if(null==t)return e;let i=Object.keys(t).filter(e=>""!==e);return 0==i.length?e:`${e}?${i.map(e=>{let i=t[e];return null==i?null:`${e}=${encodeURI(i)}`}).join("&")}`};n.getActualRootFolderId=(async()=>{const t=await n.getFileResource({fileId:"root",fields:"id"});return e(`getActualRootFolderId: res ${JSON.stringify(t,null,"  ")}`),t.id}),n.prototype.onCwdUpdate=function(e){const t=this._oncwdupdate;return null!=e&&(this._oncwdupdate=e),t},n.prototype.fireCwdUpdate=async function(){if(this._oncwdupdate)try{const i=this._oncwdupdate();if(null!=i)return i.constructor===Promise?await i:i}catch(t){e(t.stack)}},n.prototype.getCurrentFolderId=function(){return this._currentPath.slice(-1)[0].id},n.prototype.getCurrentPath=function(){const t=this._currentPath.map(e=>`${e.name}/`).join(""),n=new i(t);return e(`getCurrentPath: ${n.toString()}`),n},n.prototype.setCurrentPath=async function(t){return e("No tests pass: Gdfs#setCurrentPath"),e(`setCurrentPath(${t})`),t.isAbsolute()?await this.isDirectory(t)?(this._currentPath=await this.getPaths(t),await this.fireCwdUpdate(),!0):(e(`${t} is not a directory`),!1):(e(`The path must be absolute. ${t}`),!1)},n.prototype.getPaths=async function(t){if(e("No tests pass: Gdfs#getPaths"),e(`getPaths(${t})`),!t.isAbsolute())return e("getPaths: Error: the path must be absolute"),null;const i=[{id:"root",name:"",mimeType:n.mimeTypeFolder}];for(const r of t.elements().slice(1)){if(""===r)break;const t=i.slice(-1)[0];e(`name: ${r}, parent: ${JSON.stringify(t)}`);const a={id:null,name:null,mimeType:null};if(null!=t.id){const e=await n.findFileByName(t.id,r);if(e.length>0){const t=e.shift();a.id=t.id,a.name=t.name,a.mimeType=t.mimeType}}i.push(a)}return e(`getPaths: ${JSON.stringify(i,null,"  ")}`),i},n.prototype.getFileOfPath=async function(e){const t=await this.getPaths(e);return t?t.slice(-1)[0]:null},n.prototype.cwd=function(){return this.getCurrentPath().toString()},n.prototype.chdir=async function(t){e("No tests pass: Gdfs#chdir");const n=this.getCurrentPath(),r=i.merge(n,new i(t));return await this.setCurrentPath(r)},n.prototype.chdirById=async function(t){if(e(`Gdfs.chdirById( ${t} )`),"."===t)return!0;const i=this.getCurrentFolderId();if("/"===t||"root"===t)this._currentPath=[{id:"root",name:""}],await this.fireCwdUpdate();else if(".."===t){if("root"===i)return e("Could not move to upper folder from root."),!1;this._currentPath.pop(),await this.fireCwdUpdate()}else if(t!==i){const i=[],r=await n.getFileResource({fileId:"root",fields:"id"});let a=t;for(;;){const t=await n.getFileResource({fileId:a,fields:"id, name, parents, mimeType"});if(null==t)return e(`folder ${a} is not found.`),!1;if(t.mimeType!==n.mimeTypeFolder)return e(`folder ${a} is not folder.`),!1;if(e(JSON.stringify(t,null,"  ")),t.id==r.id){i.unshift({id:"root",name:""});break}i.unshift({id:t.id,name:t.name}),a=t.parents.shift()}e(JSON.stringify(i,null,"  ")),this._currentPath=i,await this.fireCwdUpdate()}return!0},n.prototype.isDirectory=async function(t){e("No tests pass: Gdfs#isDirectory");const i=await this.getFileOfPath(this.toAbsolutePath(t));return!!i&&i.mimeType===n.mimeTypeFolder},n.prototype.toAbsolutePath=function(t){if(e("No tests pass: Gdfs#toAbsolutePath"),t.isAbsolute())return t;const n=this.getCurrentPath();return i.merge(n,t)},n.prototype.readdir=async function(t,r){t+=t.match(/\/$/)?"":"/";const a=this.toAbsolutePath(new i(t)),s=await this.getFileOfPath(a.getPathPart());if(e(`readdir: parentFolder: ${JSON.stringify(s)}`),!s||null==s.id)return e(`readdir: The path not exists ${t}`),null;if(!n.isFolder(s))return e(`readdir: The path is not a folder ${t}`),null;const o=[],l=null==r,d=(r=r||{}).pageSize||10;const u=async t=>{e(`readdir: params: ${JSON.stringify(t,null,"  ")}`);const i=await n.getFileList(t);e(`readdir: result.nextPageToken: ${i.nextPageToken}`);for(const e of i.files)o.push(e.name);return i.nextPageToken},c={pageSize:d<=0?10:d,pageToken:r.pageToken||null,q:`parents in '${s.id}' and trashed = false`,fields:"nextPageToken, files(name)"};if(l)do{r.pageToken=await u(c)}while(null!=r.pageToken);else r.pageToken=await u(c);return e(`readdir: files: ${JSON.stringify(o)}`),o},n.prototype.stat=async function(t){e(`Gdfs#stat(${t})`),t=t.replace(/\/+$/,"");const r=this.toAbsolutePath(new i(t));if(e(`stat: absPath: ${r.toString()}`),"/"===(t=r.toString())){const t=await n.getFileResource({fileId:"root",fields:"id, name, mimeType, webContentLink, webViewLink"});return e(`stat: file ${JSON.stringify(t)}`),t}const a=await this.getFileOfPath(r.getPathPart());if(e(`stat: parentFolder: ${JSON.stringify(a)}`),!a||null==a.id)return e(`stat: The path not exists ${t}`),null;const s=r.getFilename();e(`stat: filename: ${s}`);const o=await n.findFileByName(a.id,s);if(0===o.length)return e(`stat: File not found ${t}`),null;const l=o.shift();return e(`stat: file ${JSON.stringify(l)}`),l},n.prototype.readFile=async function(t){e(`Gdfs#readFile(${t})`);const r=this.toAbsolutePath(new i(t)),a=await this.getFileOfPath(r.getPathPart());if(e(`readFile: parentFolder: ${JSON.stringify(a)}`),!a||null==a.id)return e(`readFile: The path not exists ${t}`),null;const s=r.getFilename();e(`readFile: filename: ${s}`);const o=await n.findFileByName(a.id,s);if(e(`readFile: files: ${JSON.stringify(o)}`),0===o.length)return e(`File not found ${t}`),null;const l=o.shift();return l.webContentLink?await n.downloadFile(l.id):(e(`File is not downloadable ${t}`),null)},n.prototype.mkdir=async function(t){e(`mkdir(${t})`),t=t.replace(/\/+$/,"");const r=this.toAbsolutePath(new i(t)),a=await this.getFileOfPath(r.getPathPart());if(e(`mkdir: parentFolder ${JSON.stringify(a)}`),!a||null==a.id)return e(`mkdir: The path not exists ${t}`),null;const s=r.getFilename();e(`mkdir: pathname: ${s}`);const o=await n.findFileByName(a.id,s);if(e(`mkdir: files: ${JSON.stringify(o)}`),o.length>0)return e(`mkdir: The directory exists ${t}`),null;const l=await n.createFile(a.id,s,n.mimeTypeFolder);return a.id===this.getCurrentFolderId()&&await this.fireCwdUpdate(),l},n.prototype.rmdir=async function(t){e(`rmdir(${t})`),t=t.replace(/\/+$/,"");const r=this.toAbsolutePath(new i(t)),a=await this.getFileOfPath(r.getPathPart());if(e(`rmdir: parentFolder ${JSON.stringify(a)}`),!a||null==a.id)return e(`rmdir: The path not exists ${t}`),null;const s=r.getFilename();if(e(`rmdir: pathname: ${s}`),""===s)return e(`rmdir: The root directory cannot be removed ${t}`),null;const o=await n.findFolderByName(a.id,s);if(e(`rmdir: dires: ${JSON.stringify(o)}`),0===o.length)return e(`rmdir: The directory not exists ${t}`),null;const l=o.shift();if(e(`rmdir: dir ${JSON.stringify(l)}`),e(`rmdir: _currentPath ${JSON.stringify(this._currentPath,null,"  ")}`),this._currentPath.filter(e=>e.id==l.id).length>0||l.id===await n.getActualRootFolderId())return e(`rmdir: The path is a parent ${t}`),null;if(l.mimeType!==n.mimeTypeFolder)return e(`rmdir: The path is not folder ${t}`),null;const d={q:`parents in '${l.id}' and trashed = false`,fields:"files(id)"};e(`rmdir: params ${JSON.stringify(d)}`);const u=await n.getFileList(d);if(e(`rmdir: children: ${JSON.stringify(u,null,"  ")}`),u.files.length>0)return e(`rmdir: The folder is not empty ${t}`),null;const c=await gapi.client.drive.files.delete({fileId:l.id});return a.id===this.getCurrentFolderId()&&await this.fireCwdUpdate(),c.result},n.prototype.unlink=async function(t){e(`unlink(${t})`);const r=this.toAbsolutePath(new i(t)),a=await this.getFileOfPath(r.getPathPart());if(e(`unlink: parentFolder ${JSON.stringify(a)}`),!a||null==a.id)return e(`unlink: The path not exists ${t}`),null;const s=r.getFilename();e(`unlink: pathname: ${s}`);const o=await n.findFileByName(a.id,s);if(e(`unlink: files: ${JSON.stringify(o)}`),0===o.length)return e(`unlink: The file not exists ${t}`),null;const l=o.shift();if(l.mimeType===n.mimeTypeFolder)return e(`unlink: The file is a folder ${t}`),null;const d=(await gapi.client.drive.files.delete({fileId:l.id})).result;return a.id===this.getCurrentFolderId()&&await this.fireCwdUpdate(),d},n.prototype.writeFile=async function(t,r,a){e(`Gdfs#writeFile(${t},${r}, ${JSON.stringify(a)})`);const s=this.toAbsolutePath(new i(t)),o=await this.getFileOfPath(s.getPathPart());if(e(`writeFile: parentFolder: ${JSON.stringify(o)}`),!o||null==o.id)return e(`writeFile: The path not exists ${t}`),null;const l=s.getFilename();e(`writeFile: filename: ${l}`);const d=await n.findFileByName(o.id,l);if(e(`writeFile: files: ${JSON.stringify(d)}`),0===d.length){const e=await n.createFile(o.id,l,r),t=await n.updateFile(e.id,r,a);return o.id===this.getCurrentFolderId()&&await this.fireCwdUpdate(),t}const u=d.shift();if(u.mimeType===n.mimeTypeFolder)return e(`writeFile: The path already exists as directory ${t}`),null;const c=await n.updateFile(u.id,r,a);return o.id===this.getCurrentFolderId()&&await this.fireCwdUpdate(),c},module.exports=n;
},{"debug":"jD9Y","./gdfs-event.js":"bEsR","./gdfs-path.js":"B8ln"}],"V4rw":[function(require,module,exports) {
"use strict";const e=require("debug")("gdfs-ui");e("loading");const t=require("./gdfs.js"),i=require("./gdfs-event.js");function n(n,s){e("Start of GdfsUi ctor"),this._element=n,this._gdfs=new t,this._pageSize=10,this._trashed=!1,this._pageToken=null,this._files=[],this._opt={onFileListChange:()=>{},onCurrentDirChange:()=>{}},s=s||{};for(const e of Object.keys(this._opt))e in s&&(this._opt[e]=s[e]);this._fileListChangeEvent=new i(this._element,"gdfsui-filelist-change"),this._currentDirChangeEvent=new i(this._element,"gdfsui-current-dir-change"),this._currentDirChangeEvent.listen(this._opt.onCurrentDirChange),this._fileListChangeEvent.listen(this._opt.onFileListChange),this._gdfs.onCwdUpdate(async()=>{e("Start of _gdfs.onCwdUpdate"),await this.reload(),this._currentDirChangeEvent.fire(),e("End of _gdfs.onCwdUpdate")});const r=async t=>{e("Start of signInStatusChange"),t&&await this._gdfs.chdir("/"),e("End of signInStatusChange")};t.signInStatusChangeEvent.listen(()=>r(t.isSignedIn())),r(t.isSignedIn()),e("End of GdfsUi ctor")}n.prototype.isPageCompleted=function(){return null==this._pageToken},n.prototype.getCurrentPath=function(){return this._gdfs._currentPath},n.prototype.getFiles=async function(t,i){for(e(`GdfsUi#getFiles param:{begin:${t}, end:${i})}`),e(`_pageToken: ${this._pageToken}`),null==this._pageToken&&(this._files=[]);i>this._files.length&&(await this.readDir(),this._fileListChangeEvent.fire(),null!=this._pageToken););return this._files.slice(t,i)},n.prototype.readDir=async function(){const e=[`parents in '${this._gdfs.getCurrentFolderId()}'`,`trashed = ${this._trashed?"true":"false"}`],i={pageSize:this._pageSize,pageToken:this._pageToken,q:e.join(" and "),fields:"nextPageToken, files(id, name, mimeType, webContentLink, webViewLink)"},n=await t.getFileList(i);this._pageToken=n.nextPageToken;for(const t of n.files)this._files.push(t)},n.prototype.reload=async function(){this._pageToken=null,this._files=[],await this.readDir(),this._fileListChangeEvent.fire()},n.prototype.chdirById=async function(e){await this._gdfs.chdirById(e)},n.prototype.getFileResource=async function(e){return await t.getFileResource({fileId:e})},n.prototype.uploadFile=function(e){return new Promise((t,i)=>{const n=new FileReader;n.onload=(async()=>{t(await this.writeFile(e.name,e.type,n.result))}),n.onerror=(t=>{i(new Error(["Fail to upload. Could not read the file ",`${e.name}(${t.type}).`].join("")))}),n.readAsArrayBuffer(e)})},n.prototype.writeFile=async function(e,i,n){const s=this._files.filter(t=>t.name===e).map(e=>e.id);if(0==s.length){const s=await t.createFile(this._gdfs.getCurrentFolderId(),e,i),r=JSON.parse(s);return await t.updateFile(r.id,i,n)}return await t.updateFile(s[0],i,n)},module.exports=n;
},{"debug":"jD9Y","./gdfs.js":"YTm0","./gdfs-event.js":"bEsR"}],"Focm":[function(require,module,exports) {
"use strict";const e=require("debug")("gdrive-fs"),i=require("./lib/gdfs.js");i.Ui=require("./lib/gdfs-ui.js"),i.Path=require("./lib/gdfs-path.js");try{Function("return this;")()===window&&(window.Gdfs=i)}catch(s){e(s.message)}module.exports=i;
},{"debug":"jD9Y","./lib/gdfs.js":"YTm0","./lib/gdfs-ui.js":"V4rw","./lib/gdfs-path.js":"B8ln"}]},{},["Focm"], null)
//# sourceMappingURL=/gdrive-fs.min.js.map